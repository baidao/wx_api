"use strict";!function(e,n){return"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n():e.WechatApi=n()}(this,function(){var e,n,i,r,o,t,c,a,s,u,f,l;return f={on:function(e,n){var i;return null==n&&(n=function(){}),null!=(i=window.WeixinJSBridge)?i.on(e,n):void 0},emit:function(e,n,i){var r;return null==n&&(n={}),null==i&&(i=function(){}),null!=(r=window.WeixinJSBridge)?r.invoke(e,n,i):void 0}},r=function(e){return"undefined"==typeof window.WeixinJSBridge?document.addEventListener("WeixinJSBridgeReady",e,!1):e()},l=function(e){var n,i,r,o;for(o=["appId","imgUrl","link","desc","title"],i=0,r=o.length;r>i;i++)n=o[i],e[n]="function"==typeof e[n]?e[n]():e[n];return e},c=function(e,n){return null==n&&(n={}),f.on("menu:share:timeline",function(i){return"function"==typeof n.before&&n.before(i),e=l(e),f.emit("shareTimeline",{appid:e.appId||"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title},function(e){switch(e.err_msg){case"share_timeline:cancel":"function"==typeof n.cancel&&n.cancel(e);break;case"share_timeline:fail":"function"==typeof n.error&&n.error(e);break;case"share_timeline:confirm":case"share_timeline:ok":"function"==typeof n.success&&n.success(e)}return"function"==typeof n.always?n.always(e):void 0})})},t=function(e,n){return null==n&&(n={}),f.on("menu:share:appmessage",function(i){return"function"==typeof n.before&&n.before(i),e=l(e),f.emit("sendAppMessage",{appid:e.appId||"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title},function(e){switch(e.err_msg){case"send_app_msg:cancel":"function"==typeof n.cancel&&n.cancel(e);break;case"send_app_msg:fail":"function"==typeof n.error&&n.error(e);break;case"send_app_msg:confirm":case"send_app_msg:ok":"function"==typeof n.success&&n.success(e)}return"function"==typeof n.always?n.always(e):void 0})})},a=function(e,n){return f.on("menu:share:weibo",function(i){return"function"==typeof n.before&&n.before(i),e=l(e),f.emit("shareWeibo",{content:e.desc,url:e.link},function(e){switch(e.err_msg){case"share_weibo:cancel":"function"==typeof n.cancel&&n.cancel(e);break;case"share_weibo:fail":"function"==typeof n.error&&n.error(e);break;case"share_weibo:confirm":case"share_weibo:ok":"function"==typeof n.success&&n.success(e)}return"function"==typeof n.always?n.always(e):void 0})})},o=function(e,n){return f.on("menu:share:email",function(i){return"function"==typeof n.before&&n.before(i),e=l(e),f.emit("sendEmail",{title_link:e.link,content:e.desc,title:e.title},function(e){switch(e.err_msg){case"share_email:cancel":"function"==typeof n.cancel&&n.cancel(e);break;case"share_email:fail":"function"==typeof n.error&&n.error(e);break;case"share_email:confirm":case"share_email:ok":"function"==typeof n.success&&n.success(e)}return"function"==typeof n.always?n.always(e):void 0})})},s=function(){return f.emit("showOptionMenu")},e=function(){return f.emit("hideOptionMenu")},u=function(){return f.emit("showToolbar")},n=function(){return f.emit("hideToolbar")},i=function(e,n){return e&&n&&n.length>0?WeixinJSBridge.invoke("imagePreview",{current:e,urls:n}):void 0},{version:"0.0.1",ready:r,shareToTimeline:c,shareToFriend:t,shareToWeibo:a,shareToEmail:o,showOptionMenu:s,hideOptionMenu:e,showToolbar:u,hideToolbar:n,previewImage:i}});