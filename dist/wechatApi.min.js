"use strict";!function(e,n){return"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n():e.WechatApi=n()}(this,function(){var e,n,i,t,o,r,u,f,c,s,a,l,d,m,p,h,w;return m={on:function(e,n){var i;return null==n&&(n=function(){}),null!=(i=window.WeixinJSBridge)?i.on(e,n):void 0},emit:function(e,n,i){var t;return null==n&&(n={}),null==i&&(i=function(){}),null!=(t=window.WeixinJSBridge)?t.invoke(e,n,i):void 0}},h=function(e){var n,i,t,o,r;if(t=typeof e,!("function"===t||"object"===t&&e))return e;for(o=0,r=arguments.length;r>o;o++){i=arguments[o];for(n in i)e[n]=i[n]}return e},w=function(e,n){var i;return i=e.err_msg,/:ok$/.test(i)?"function"==typeof n.success&&n.success(e):/:confirm$/.test(i)?"function"==typeof n.success&&n.success(e):/:cancel$/.test(i)?"function"==typeof n.cancel&&n.cancel(e):/:fail$/.test(i)&&"function"==typeof n.error&&n.error(e),"function"==typeof n.always?n.always(e):void 0},p={link:window.top.location.href,img_width:"256",img_height:"256",img_url:void 0,appid:void 0,title:void 0,desc:void 0},r=function(e){return"undefined"==typeof window.WeixinJSBridge?document.addEventListener("WeixinJSBridgeReady",e,!1):e()},u=function(e,n,i){return null==i&&(i=!1),m.on("menu:general:share",function(t){var o,r;switch("function"==typeof n.before&&n.before(t),o=t.shareTo,r=void 0,o){case"friend":case"appmessage":case"sendappmessage":r="sendAppMessage",i&&(e=e.friend);break;case"timeline":r="shareTimeline",i&&(e=e.timeline);break;case"weibo":r="shareWeibo",i&&(e=e.weibo);break;case"email":r="sendEmail",i&&(e=e.emial)}return r?m.emit(r,h({},p,e),function(e){return w(e,n)}):void 0})},s=function(e,n){return null==n&&(n={}),m.on("menu:share:timeline",function(i){return"function"==typeof n.before&&n.before(i),m.emit("shareTimeline",h({},p,e),function(e){return w(e,n)})})},c=function(e,n){return null==n&&(n={}),m.on("menu:share:appmessage",function(i){return"function"==typeof n.before&&n.before(i),m.emit("sendAppMessage",h({},p,e),function(e){return w(e,n)})})},a=function(e,n){return m.on("menu:share:weibo",function(i){return"function"==typeof n.before&&n.before(i),m.on("shareWeibo",h({},p,e),function(e){return w(e,n)})})},f=function(e,n){return m.on("menu:share:email",function(i){return"function"==typeof n.before&&n.before(i),m.on("sendEmail",h({},p,e),function(e){return w(e,n)})})},l=function(){return m.emit("showOptionMenu")},i=function(){return m.emit("hideOptionMenu")},d=function(){return m.emit("showToolbar")},t=function(){return m.emit("hideToolbar")},e=function(){return m.emit("closeWindow")},n=function(e){return m.emit("getNetworkType",{},function(n){var i;return i=n.err_msg,e(i?i.slice("network_type:".length):i)})},o=function(e,n){return e&&n&&n.length>0?m.emit("imagePreview",{current:e,urls:n}):void 0},{version:"0.0.3",ready:r,share:u,shareToTimeline:s,shareToFriend:c,shareToWeibo:a,shareToEmail:f,showOptionMenu:l,hideOptionMenu:i,showToolbar:d,hideToolbar:t,closeWindow:e,getNetworkType:n,previewImage:o}});